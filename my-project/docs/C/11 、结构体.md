
[TOC]

---

## 一、枚举（enum）

### 1、常量符号化

```c++
enum colors { red, yellow, green };
```

枚举是一种**用户定义的数据类型**，用关键字 `enum` 声明：

```c++
enum 枚举类型名 { 名字0, …, 名字n };
```


```c++
enum color { red, yellow, green };

void f(enum color c);

int main(void) {
    enum color t = red;
    scanf("%d", &t);
    f(t);
    return 0;
}

void f(enum color c) {
    printf("%d\n", c);
}
```

* 枚举量可以作为**值**使用。
* 枚举类型可以用 `enum` 声明。
* 实际上内部以**整数**存储与计算。

### 2、自动计数的枚举

```c++
enum COLOR { RED, YELLOW, GREEN, NumCOLORS };
```

这样在需要**遍历所有枚举值**或用枚举量作**数组下标**时会更方便。

### 3、枚举量的赋值

可以为枚举量**指定具体值**：

```c++
enum COLOR { RED = 1, YELLOW, GREEN = 5 };
```

后续未指定的成员自动递增。


!!! info
    - 枚举比 `const int` 更简洁；
    - 枚举比宏（`#define`）更安全，因为它具有类型检查特性。

---

## 二、结构（struct）

### 1、结构类型声明

```c++
struct date {
    int month;
    int day;
    int year;
}; // 注意分号
```

!!! tip
    通常**在函数外部声明结构类型**，以便多个函数共用。


```c++
struct date {
    int year;
    int month;
    int day;
};

int main(void) {
    struct date today;
    today.day = 10;
    today.month = 12;
    today.year = 2001;

    printf("Today's date is %i-%i-%i.\n", today.year, today.month, today.day);
    return 0;
}
```

### 2、声明结构的三种形式

(1) **声明结构类型与变量分开：**

```c++
struct point {
    int x;
    int y;
};

struct point p1, p2;
```

(2) **无名结构：**

```c++
struct {
    int x;
    int y;
} p1, p2;
```

(3) **声明类型并同时定义变量：**

```c++
struct point {
    int x;
    int y;
} p1, p2;
```

!!! note
    ①与③都定义了结构类型 `point`，
    ②仅定义了结构变量，无类型名。

### 3、结构初始化

```c++
struct date today = {7, 31, 2024};
struct date today2 = { .month = 7, .year = 2024 };
// 未赋值成员自动初始化为 0
```

### 4、结构成员访问

* **数组成员**：`[]` 访问
  e.g. `a[0] = 10;`
* **结构成员**：`.` 访问
  e.g. `today.day = 31;`

### 5、结构的运算

结构之间可以直接**整体赋值**，而数组不行：

```c++
p1 = (struct point){5, 10}; // 初始化
p1 = p2;                    // 整体复制
```

### 6、结构指针

结构变量名**不是地址**，必须显式取地址：

```c++
struct date today;
struct date *pDate = &today;
```

---

## 三、结构与函数

### 1、结构作为参数传递

```c++
int numberOfDays(struct date d);
```

结构作为参数时，会在函数内**复制一份完整结构**。

### 2、结构输入

`scanf` 不能直接一次性输入整个结构，
通常通过**临时结构变量**输入，再整体返回。

### 3、结构指针作为参数


```c++
struct date myday;
struct date *p = &myday;

(*p).month = 12; // 等价于：
p->month = 12;
```

`->` 用于访问**指针指向的结构体成员**。
