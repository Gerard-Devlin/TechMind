[TOC]

---

## 1ã€åŸºæœ¬

```
int		-4byte
char	-1byte
float	-4byte
```

å®šä¹‰ï¼šå‚¨å­˜å…¶ä»–å˜é‡ ***åœ°å€*** çš„å˜é‡

### ï¼ˆ1ï¼‰å†™æ³•

- å‡å¦‚`a=5`ï¼Œåœ°å€åœ¨`204`ï¼Œ$p$ æ˜¯æŒ‡å‘ $a$ çš„æŒ‡é’ˆï¼Œåœ°å€æ˜¯ $64$


```c++
int main() {
    int a = 5;
    int *p;
    p = &a;

    printf("p    = %p\n", p);      // è¾“å‡ºæŒ‡é’ˆ p çš„å€¼ï¼ˆå³ a çš„åœ°å€ï¼‰	- 204
    printf("&a   = %p\n", &a);     // a çš„åœ°å€ï¼Œå’Œ p çš„å€¼ä¸€æ ·		  - 204
    printf("&p   = %p\n", &p);     // p è‡ªå·±çš„åœ°å€ï¼ˆä¸åŒäº a çš„åœ°å€ï¼‰    - 64
    printf("*p   = %d\n", *p);     // è§£å¼•ç”¨ pï¼Œç­‰ä»·äº a çš„å€¼		  - 5 

    *p = 8;                        // é€šè¿‡æŒ‡é’ˆä¿®æ”¹ a çš„å€¼
    printf("a    = %d\n", a);      // è¾“å‡º aï¼Œå€¼å·²å˜ä¸º 8

    return 0;
}
```

!!! note
	`p` â†’ åœ°å€
	
	`*p` â†’ å‚¨å­˜åœ¨è¿™ä¸ªåœ°å€çš„å˜é‡


??? example "æŒ‡é’ˆå®šä¹‰"
    ```c++
    int main() {
        int a = 10;
        int *p;
        p = &a;
        printf("%d\n", p);
        printf("%d\n", *p);
        printf("%d\n", &a);
    }
    
    /*
    -551552636
    10
    -551552636
    */
    ```



    ```c++
    int main() {
        int a = 10;
       int *p;
        p = &a;
        printf("%d\n", p);
        printf("%d\n", *p);
        printf("%d\n", &a);
        int b = 20;
        *p = b; // æ­¤å¤„pä»ç„¶æŒ‡å‘aï¼Œæ‰€ä»¥ä¿®æ”¹açš„å€¼å˜æˆbäº†
    }
    ```

??? example "æŒ‡é’ˆå¤§å°"
    ```c++
    int main() {
        int a = 10;
        int *p;
        p = &a;
        printf("%d\n", p);
        printf("%d\n", p + 1);
    }
    
    /*
    ä¸¤æ¬¡è¾“å‡ºç›¸å·®4ï¼Œä¹Ÿå°±æ˜¯1ä¸ªintçš„å¤§å°
    */
    ```

---

## 2ã€æŒ‡é’ˆç±»å‹

### ï¼ˆ1ï¼‰ä¸€èˆ¬æŒ‡é’ˆ

!!! warning
    - æŒ‡é’ˆå¼ºè°ƒç±»å‹ï¼Œå› ä¸ºcä¸­æ•°æ®ç±»å‹å¤§å°ä¸åŒ

    ```c++
    int*  â†’ int
    char* â†’ char
    ```

```c++
int main() {
    int a = 1025;
    int *p;
    p = &a;
    char *p0;
    p0 = (char *)p; // ç±»å‹è½¬æ¢
    printf("Address of p0 = %d\n", p0);
    printf("Address of p = %d\n", p);
    printf("Value of p = %d\n", *p);
    printf("Value of p0 = %d\n", *p0);
}

/*
Address of p0 = 1210055916
Address of p = 1210055916
Value of p = 1025
Value of p0 = 1    1025 å­˜ä¸ºå››ä¸ªå­—èŠ‚ æœ€åä¸€ä¸ªå­—èŠ‚æ˜¯1 å–å®Œåœ°å€ ç”±äºcharç±»å‹å¤§å°1byte åªå–æœ€åä¸€ä¸ªå­—èŠ‚çš„å€¼ å³1
*/
```


### ï¼ˆ2ï¼‰`void` æŒ‡é’ˆ

ä¸å¼ºè°ƒç±»å‹ï¼Œä½†ä¸èƒ½è§£æŒ‡é’ˆï¼Œä¹Ÿä¸èƒ½åšç®—æœ¯è¿ç®—



### ï¼ˆ3ï¼‰æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ

```c++
int main() {
    int x = 5;
    int *p = &x;
    *p = 6;
    int **q = &p;
    int ***r = &q;
    printf("%d\n", *p);    // xçš„å€¼
    printf("%d\n", *q);    // pçš„å€¼
    printf("%d\n", *(*q)); // ç›¸å½“äº*p ->6
    /*
    ***rï¼Œ**qï¼Œ*pï¼Œå¯ä»¥ä¿®æ”¹xçš„å€¼ï¼Œç­‰ä»·
    */
}
```

---

## 3ã€å‡½æ•°ä¼ å€¼/ä¼ å¼•ç”¨

!!! failure

    ```c++
    // é”™è¯¯åšæ³•
    void increment(int a) { // å½¢å‚:è¢«è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡
        a += 1;
        cout << "Address of a is" << &a << endl;
    }
    
    int main() {
        int a = 10;
        increment(a); // å®å‚:è°ƒç”¨å‡½æ•°ä¸­çš„å˜é‡
        cout << "Address of a is" << &a;
    }
    ```

```c++
void increment(int *p) {
    *p += 1;
}

int main() {
    int a = 10;
    increment(&a);
    cout << a << endl;
}

/*
å‡½æ•°å…ˆè§£åœ°å€ï¼Œç„¶åå†è¿™ä¸ªå˜é‡ä¸Šï¼‹1
*/
```

---

## 4ã€æ•°ç»„æŒ‡é’ˆ

### ï¼ˆ1ï¼‰å–å€¼/å–åœ°å€

å–åœ°å€ ä¸¤ç§

```c++
&a[i] // ç›´æ¥å–åœ°å€
```

```c++
(a+i) // æ•°ç»„è‡ªèº«å³ä¸ºæŒ‡é’ˆï¼Œå–åœ°å€
```

å–å€¼ ä¸¤ç§

```c++
a[i]
```

```c++
*(a+i)
```

```c++
int main() {
    int a[] = {2, 4, 5, 6, 8};
    cout << a << endl;		// å–ç¬¬ä¸€ä¸ªçš„åœ°å€
    cout << &a << endl;		// å–åœ°å€
    cout << a[0] << endl;	// å–ç¬¬ä¸€ä¸ªçš„å€¼
    cout << *a << endl;		// ä¹Ÿæ˜¯å–ç¬¬ä¸€ä¸ªçš„å€¼
}
```

---

### ï¼ˆ2ï¼‰æ•°ç»„ä½œä¸ºå‚æ•°

```c++
int SumOfELem(int a[], int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        sum += a[i];
    }
    return sum;
}

int main() {
    int a[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
    int size = sizeof(a) / sizeof(a[0]);
    int total = SumOfELem(a, size);
    printf("The sum of the elements is : %d", total);
}
```

å¦‚æœæ”¹å†™æˆå¦‚ä¸‹ï¼Œåˆ™ä¸èƒ½æ­£å¸¸å·¥ä½œ

```c++
int SumOfELem(int a[]) { // ç­‰ä»·äºint* a
    int sum = 0;
    int size = sizeof(a) / sizeof(a[0]);
    for (int i = 0; i < size; i++) {
        sum += a[i];
    }
    return sum;
}

int main() {
    int a[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
    int total = SumOfELem(a);
    printf("The sum of the elements is : %d", total);
}
```

!!! tip

    åœ¨å‡½æ•°ä¸­è°ƒç”¨æ•°ç»„ï¼Œç¼–è¯‘å™¨åªä¼šå¤åˆ¶æ•°ç»„é¦–ä¸ªå…ƒç´ çš„åœ°å€ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°ç»„

```c++
void Double(int *a, int size) {
    for (int i = 0; i < size; i++) {
        a[i] *= 2;
    }
}

int main() {
    int a[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};
    int size = sizeof(a) / sizeof(a[0]);
    Double(a, size);
    for (int i = 0; i < size; i++) {
        cout << a[i] << " ";
    }
}
```

---

## 5ã€æŒ‡é’ˆå’Œå­—ç¬¦ä¸²æ•°ç»„

### å‚¨å­˜å­—ç¬¦ä¸²

$$
\text{size of array}>=\text{num of characters}
$$

æœ€åä¸€ä¸ªæ˜¯\0

```c++
int main() {
    char C[20];
    C[0] = 'J';
    C[1] = 'I';
    C[2] = 'L';
    C[3] = 'L';
    C[4] = '\0';
    printf("%s", C);
}
```

!!! note

    - æŒ‡é’ˆå’Œæ•°ç»„æ˜¯ä¸åŒçš„ç±»å‹ï¼Œä½†æ˜¯ç”¨èµ·æ¥ç±»ä¼¼
    - æ•°ç»„ä¼ ç»™å‡½æ•°ï¼Œæ°¸è¿œä¼ çš„æ˜¯å¼•ç”¨

```c++
void print(char *C) {
    int i = 0;
    while (*(C + i) != '\0') {
        cout << C[i];
        i++;
    }
    cout << endl;
}

void print(char *C) {
    int i = 0;
    while (*C != '\0') { // ä¹Ÿå¯ä»¥è¿™æ ·å†™
        cout << C[i];
        C++; // è‡ªå¢åŠ ä¸€ä¸ªcharç±»å‹å¤§å°
    }
    cout << endl;
}

int main() {
    char C[20] = "Hello";
    print(C);
}
```

```c++
void print(const char *C) {
    int i = 0;
    while (*C != '\0') {
        cout << C[i];
        C++;
    }
    cout << endl;
}

int main() {
    char *C = "Hello";
    print(C);
}
```

---

## 6ã€å¤šç»´æ•°ç»„

### ï¼ˆ1ï¼‰äºŒç»´

```c++
int B[2][3];
int (*p)[3] = B;
```

```c++
B[0] // B[0][0],B[0][1],B[0][2]
B[1] // B[1][0],B[1][1],B[1][2]
/*
è¿™ä¸¤ä¸ªéƒ½æ˜¯æœ‰ä¸‰ä¸ªæ•´æ•°çš„ä¸€ç»´æ•°ç»„
*/
```

```c++
#include <stdio.h>
int main() {
    int B[3][4] = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}};

    printf("B        = %p\n", B);        // æŒ‡å‘ B[0]ï¼Œç­‰ä»·äº &B[0]
    printf("*B       = %p\n", *B);       // B[0]ï¼Œç­‰ä»·äº &B[0][0]
    printf("B[0]     = %p\n", B[0]);     // B[0]ï¼Œç­‰ä»·äº &B[0][0]
    printf("&B[0][0] = %p\n", &B[0][0]); // æ˜ç¡®å†™å‡º B[0][0] çš„åœ°å€

    return 0;
}

// ç»“æœæ˜¯ä¸€æ ·çš„ éƒ½æ˜¯æŒ‡å‘B[0]çš„åœ°å€ï¼Œå³B[0][0]çš„åœ°å€
```

```c++
B[x] + y = &B[x][y]
```

```
B[i][j] = *( B[i] + j ) = *( *( B + i ) + j )
```

### ï¼ˆ2ï¼‰ä¸‰ç»´

```c++
int c[3][2][2];
// æ‹†è§£ ä¸‰ä¸ªäºŒç»´ æ¯ä¸ªäºŒç»´åˆæ˜¯ä¸¤ä¸ªä¸€ç»´
int (*p)[2][2] = c;
```

```c++
c[i][j][k] = *(c[i][j] + k) = *(*(c[i] + j) + k) = *(*(*(C + i) + j) + k)
```

!!! example "æ•°ç»„"
    ```c++
    c[] = {2, 5, 7, 9, 3, 4, 6, 1, 0, 8, 11, 13};
    *(c[0][1] + 1) = c[0][1][1] = 9 * (c[1] + 1) = c[1][1] = &c[1][1][0] = // æ•°å­—6çš„åœ°å€
    ```

!!! example "æ•°ç»„ä½œå‚æ•°"
    ```c++
    void Func(int A[][3]) {
    }

    int main() {
        int C[3][2][2] = {
            {{2, 5}, {7, 9}},
            {{3, 4}, {6, 1}},
            {{0, 8}, {11, 13}}};
        int A[2] = {1, 2};
        int B[2][3] = {{2, 4, 6}, {5, 7, 8}};
        // å¦‚æœè¦ç¨‹åºæ¥å—Bä½œä¸ºå‚æ•°ï¼ŒBæ˜¯è¿”å› int (*)[3],è¦å†™Func(int (*)[3])æˆ–è€…Func[][3]
        /*
         *æ³¨æ„è¦æŒ‡å®šåˆ—æ•°ï¼Œåˆ—æ•°ç›¸åŒçš„æ•°ç»„å¯ä»¥è¢«å½“ä½œå‚æ•°ä¼ å…¥
         */
        int X[5][3];
        Func(*B);
    }
    ```

---

## 7ã€åŠ¨æ€å†…å­˜

|  å†…å­˜ç»“æ„  |    å‚¨å­˜å†…å®¹    |
| :--------: | :------------: |
|     å †     | è¿›è¡Œåˆ†é…çš„éƒ¨åˆ† |
|     æ ˆ     |    å±€éƒ¨å˜é‡    |
| é™æ€æ•°æ®æ®µ |    å…¨å±€å˜é‡    |
|   ä»£ç æ®µ   |      æŒ‡ä»¤      |

æ ˆå¸§ä¸­å­˜å‚¨ç€åŠ¨ä½œï¼Œåˆ†æ­¥æ‰§è¡Œï¼Œå®Œæˆå°±`pop`ï¼Œæœ‰è‡ªå·±çš„åˆ†é…å’Œé”€æ¯è§„åˆ™

æ ˆæº¢å‡ºï¼ˆStack overflowï¼‰â†’ ç¼ºç‚¹ï¼šå¤§å°æœ‰é™åˆ¶

å †ï¼šå¤§å°ä¸å›ºå®šï¼Œå¯ä»¥ä»»æ„ä½¿ç”¨å †ä¸Šå†…å­˜ï¼ˆç©ºé—²å†…å­˜æ®µï¼‰ğŸ‘‰ åŠ¨æ€åˆ†é…çš„å°±æ˜¯**å †**ä¸Šçš„å†…å­˜

!!! info

    | C         | C++      |
    | --------- | -------- |
    | `malloc`  | `new`    |
    | `calloc`  | `delete` |
    | `realloc` |          |
    | `free`    |          |


!!! example "åŠ¨æ€å†…å­˜åˆ†é…"

    === "C"
        ```c++
        int main() {
            int a; // åœ¨æ ˆä¸Š
            int *p;
            *p = &a;
            p = (int *)malloc(sizeof(int)); // åœ¨å †ä¸Šåˆ†é…äº†4byteçš„å†…å­˜ï¼Œvoidå‹æŒ‡é’ˆ
            *p = 10;                        // ç”¨å †ä¸Šæ•°æ®çš„å”¯ä¸€æ–¹å¼ï¼Œä¼ å¼•ç”¨ï¼ˆè§£æŒ‡é’ˆï¼‰
            free(p);                        // é‡Šæ”¾å †ä¸Šå†…å­˜ï¼Œå¥½ä¹ æƒ¯
    
            p = (int *)malloc(20 * sizeof(int)); // åœ¨å †ä¸Šåˆåˆ†é…äº†4*20byteçš„å†…å­˜ï¼Œ*pæŒ‡å‘æ•°ç»„èµ·å§‹å…ƒç´ ï¼Œæ²¡æœ‰freeçš„è¯åŸæ¥æŒ‡é’ˆä»»ç„¶å­˜åœ¨ï¼Œå¯èƒ½ä¼šå†…å­˜æ³„éœ²
            *p = 20;
        }
        ```
    
    === "C++"
    
        ```c++
        int main() {
            int a; // åœ¨æ ˆä¸Š
            int *p;
            p = new int;     // åœ¨å †ä¸Šåˆ†é…äº†4byteçš„å†…å­˜ï¼Œvoidå‹æŒ‡é’ˆ
            *p = 10;         // ç”¨å †ä¸Šæ•°æ®çš„å”¯ä¸€æ–¹å¼ï¼Œä¼ å¼•ç”¨ï¼ˆè§£æŒ‡é’ˆï¼‰
            delete p;        // é‡Šæ”¾å †ä¸Šå†…å­˜ï¼Œå¥½ä¹ æƒ¯
            p = new int[20]; // åœ¨å †ä¸Šåˆåˆ†é…äº†4byteçš„å†…å­˜ï¼Œä½†åŸæ¥æŒ‡é’ˆä»»ç„¶å­˜åœ¨ï¼Œå¯èƒ½ä¼šå†…å­˜æ³„éœ²
            delete[] p;
        }
        ```

---

### ï¼ˆ1ï¼‰`malloc`

```c++
malloc -  void * malloc(size_t _Size);
// void å‹æŒ‡é’ˆ
// size_t å¯ä»¥ç†è§£ä¸ºunsigned int
// æ­¤å¤„æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯éœ€è¦åˆ†é…çš„å†…å­˜å¤§å°
```

```c++
void *p = malloc(10 * sizeof(int))           // è¿”å›voidå‹æŒ‡é’ˆï¼Œä¸èƒ½ç›´æ¥ç”¨ï¼Œè¦ç±»å‹è½¬æ¢
int *p = (int *)malloc(10 * sizeof(int))     // æ­¤å¤„è¿›è¡Œç±»å‹è½¬æ¢(int*)
```

### ï¼ˆ2ï¼‰`calloc`

```c++
calloc - void * calloc(size_t num , size_t size);
// void å‹æŒ‡é’ˆ
// æ­¤å¤„æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ç‰¹å®šç±»å‹çš„å…ƒç´ æ•°é‡ï¼Œä¸€ä¸ªæ˜¯ç±»å‹å¤§å°
```

!!! note
	å’Œ`malloc`åŒºåˆ«ï¼š`malloc`åœ¨åˆ†é…ä¹‹åä¸ä¼šå¯¹å†…å­˜åˆå§‹åŒ–ï¼Œ`calloc`ä¼šå°†åˆ†é…çš„å†…å­˜åˆå§‹åŒ–ä¸º$0$

```c++
void *p = calloc(10 ï¼Œ sizeof(int))           // è¿”å›voidå‹æŒ‡é’ˆï¼Œä¸èƒ½ç›´æ¥ç”¨ï¼Œè¦ç±»å‹è½¬æ¢
int *p = (int *)calloc(10 ï¼Œ sizeof(int))     // æ­¤å¤„è¿›è¡Œç±»å‹è½¬æ¢(int*)
```

### ï¼ˆ3ï¼‰`realloc`

```c++
realloc - void * realloc (void*ptr,size_t size);
```

??? example "`malloc`"

    ```c++
    int main() {
        int n;
        cin >> n;
        int *A = (int *)malloc(n * sizeof(int));
        // c++: int *arr = new int[n];
        for (int i = 0; i < n; i++) {
            *(A + i) = i + 1;
        }
        for (int i = 0; i < n; i++) {
            cout << *(A + i) << " ";
        }
    }
    ```

??? example "`realloc`"

    ```c++
    int main() {
        int n;
        cin >> n;
        int *A = (int *)malloc(n * sizeof(int));
        for (int i = 0; i < n; i++) {
            *(A + i) = i + 1;
        }
        // free(A);
        int *B = (int *)realloc(A, 2 * n * sizeof(int));
        for (int i = 0; i < n; i++) {
            cout << *(B + i) << " ";
        }
    }
    ```

---

## 8ã€å‡½æ•°è¿”å›æŒ‡é’ˆ

```c++
int add(int a, int b) {
    cout << "Address of a in add=" << &a << endl;
    return a + b;
}

int main() {
    int x = 2;
    int y = 3;
    cout << "Address of x in main=" << &x << endl;
    cout << add(x, y); // æ­¤å¤„x,yåœ¨ä¸»å‡½æ•°ä¸­çš„å€¼è¢«ä¼ é€’ç»™äº†addå‡½æ•°
}
```

```c++
int add(int *a, int *b) {
    cout << "Address of a in add=" << &a << endl;
    return *a + *b;
}

int main() {
    int x = 2;
    int y = 3;
    cout << "Address of x in main=" << &x << endl;
    cout << add(&x, &y);
}
```

---



