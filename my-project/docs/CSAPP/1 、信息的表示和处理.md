[TOC]

---

## 一、位运算

`|,&,~,^,<<,>>`

!!! danger
    vs 逻辑运算
    
     `&&,!,||`
    
     - `0` 为假，非`0` 为真
       - 只返回`0/1`

---

## 二、整数

$$
B2U(X) = \sum_{i=0}^{w-1} x_i \cdot 2^i
$$

$$
B2T(X) = -x_{w-1} \cdot 2^{w-1} + \sum_{i=0}^{w-2} x_i \cdot 2^i
$$

### 1、`unsigned`和`signed`

`unsigned`（无符号整数）：表示正数

signed（有符号整数）：第一位是负的，所以称为符号位，如果是`1`则是负数，需要使用**补码**

| **Unsigned Values** | **Two's Complement Values** |
| ------------------- | --------------------------- |
| UMin = 0            | TMin = $-2^{w-1}$           |
| UMax = $2^w - 1$    | TMax = $2^{w-1} - 1$        |
|                     | Minus 1 = 111...1           |

```c
// 死循环
for (unsigned i = n ; i >= 0 ; i--){
	
}
```

**表达式包含有符号和无符号整数**：当一个表达式中同时存在有符号（`signed`）和无符号（`unsigned`）整数时，会发生类型转换。

**`int` 被转换为无符号**：在这种情况下，默认的行为是将有符号整数类型（`int`）转换为无符号类型（`unsigned`）。

---

### 2、符号扩展

- **无符号（Unsigned）**: 在将短整型（short int）扩展为整型（int）时，添加零。
- **有符号（Signed）**: 在扩展时，进行**符号扩展**，保持符号位。

$$
\begin{aligned}(1011)=-5\\
(1111\text{ }1011)=-5\end{aligned}
$$

---

### 3、运算

**无符号**：截掉多出的位
$$
UAdd(u,v)=(u+v)\mod 2^w 
$$

$$
UMult(u,v)=u·v \mod 2^w
$$
**有符号**：

运算仍然截取多余位

$$
\begin{aligned}
-3 &= (1101) \\
5 &= (0101) \\
2 &= (0010)
\end{aligned}
$$
---

??? tip
    **无符号**：
    
    - `u << k` 与 $u \times 2^k$ 等同
      - `u >> k` 与 $u / 2^k$ 等同
    
     **有符号**：算术右移（补1）
    
    - $(1010)=-6$
      - $(1101)=-3$
      - $(1110)=-2$

!!! danger
    - 安全编码：`unsigned` 溢出之后又循环一圈
    ```c++
    unsigned i;
    // 0 - 1 → UMax
    for(i = cnt - 2; i < cnt; i--){
        a[i] += a[i+1];
    }
    // Better
    size_t i;
    ```

---

## 三、内存组织

| C Data Type | Typical 32-bit | Typical 64-bit | x86-64 |
| ----------- | -------------- | -------------- | ------ |
| char        | 1              | 1              | 1      |
| short       | 2              | 2              | 2      |
| int         | 4              | 4              | 4      |
| long        | 4              | 8              | 8      |
| float       | 4              | 4              | 4      |
| double      | 8              | 8              | 8      |
| long double | -              | -              | 10/16  |
| pointer     | 4              | 8              | 8      |

| 小端序                 | 大端序                 |
| ---------------------- | ---------------------- |
| 最低有效字节有最小地址 | 最低有效字节有最高地址 |

```c++
typedef unsigned char *pointer;

void show_bytes(pointer start, size_t length) {
    size_t i;
    for (i = 0; i < length; i++) {
        printf("%p\t0x%.2x\n", start + i, *(start + i));
    }
    printf("\n");
}

int main() {
    int a = 15123; // 15123 = 0x 3b 13
    show_bytes((pointer) &a, sizeof(a));
}
```

```
000000a463fff9bc        0x13
000000a463fff9bd        0x3b
000000a463fff9be        0x00
000000a463fff9bf        0x00
```

---


!!! warning
     取反加一变号
    
    $$
    \begin{aligned}
    (1011)_2 &= -5 \\
    (0101)_2 &= 5
    \end{aligned}
    $$

     → 不对称性：

    $$
    \begin{aligned}
    TMin = -2^{w-1} \\
    TMax=2^{w-1}-1
    \end{aligned}
    $$

     ∴ $-Tmin$ 仍然是最大负数

     ∴ $x\leq0 \not\Rightarrow -x\geq0$

---

## 四、浮点



